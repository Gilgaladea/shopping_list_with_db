<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lista zakupów</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">

    <!-- Sidebar / Menu -->
    <aside class="sidebar">
      <h3>Menu</h3>

      <h4 class="centered_text">Ustawienia</h4>
      <div class="toggle-container">
        <button id="languageToggle">English</button>
      </div>
      <div class="toggle-container">
        <button id="themeToggle">Tryb ciemny</button>
      </div>

      <hr>

      <h4 class="centered_text">Dodaj nowy produkt</h4>
      <form id="addItemForm" class="add-form">
        <input 
          type="text" 
          id="itemName" 
          class="centered_text" 
          placeholder="Nazwa produktu" 
          required 
        >
        <select id="itemCategory" required>
          <option value="">Wybierz kategorię</option>
          <option value="dairy">Nabiał</option>
          <option value="bread">Pieczywo</option>
          <option value="fruits">Owoce</option>
          <option value="vegetables">Warzywa</option>
          <option value="meat">Mięso</option>
          <option value="fish">Ryby</option>
          <option value="dry">Produkty suche</option>
          <option value="frozen">Mrożonki</option>
          <option value="beverages">Napoje</option>
          <option value="snacks">Przekąski</option>
          <option value="other">Inne</option>
        </select>
        <button type="submit">Dodaj</button>
      </form>

      <hr>

      <h4 class="centered_text">Zmień kolejność kategorii</h4>
      <h5 class="toggle-category-order" style="cursor: pointer;">
        <span id="toggleIcon">▼</span>
      </h5>
      <ul id="categoryOrderList" class="sortable-list"></ul>
    </aside>

    <!-- Główna lista zakupów -->
    <main class="main">
      <h2>Lista zakupów</h2>
      <ul id="toBuyList"></ul>
    </main>

    <!-- Lista wszystkich produktów -->
    <section class="product-list">
      <h3>Wszystkie produkty</h3>
      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Szukaj">
      </div>
      <div id="categoryList" class="category-list">
        <!-- Kategorie będą generowane dynamicznie -->
      </div>
      <div id="productContainer"></div>
    </section>

  </div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getFirestore, collection, getDocs, addDoc, updateDoc, deleteDoc, doc, onSnapshot } 
    from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCFORia989pRh6Q7n0PRPv2JYM-7kFj1vU",
  authDomain: "shopping-list-c5094.firebaseapp.com",
  databaseURL: "https://shopping-list-c5094-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "shopping-list-c5094",
  storageBucket: "shopping-list-c5094.firebasestorage.app",
  messagingSenderId: "1000790903406",
  appId: "1:1000790903406:web:8aec9092b4a1599573f47f",
  measurementId: "G-LNM76JR6KK"
};

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.db = db;
  window.firestore = { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, onSnapshot };
</script>

<script src="translations.js" defer></script>
<script src="script.js" defer></script>

  <div id="cookie-banner" class="cookie-banner">
    <p>Ta strona używa plików cookies w celach funkcjonalnych.</p>
    <button id="accept-cookies">Akceptuję</button>
  </div>
</body>
</html>